(()=>{"use strict";const e={inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._inputElements.some((e=>!e.validity.valid))?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_true"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_true"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("popup__close")||e.target.classList.contains("popup"))&&(this.close(),console.log("close"))}))}}class i extends s{constructor(e,t){super(e),this._submitForm=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitForm(this._getInputValues())}))}close(){super.close(),this._form.reset()}}const n=new t(e,document.querySelector("#edit-profile-popup")),o=new t(e,document.querySelector("#add-card-popup")),r=new class{constructor(e,t){this._name=document.querySelector(e),this._description=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}}(".profile__name",".profile__title"),l=new i("#edit-profile-popup",(e=>{r.setUserInfo(e),console.log(e),l.close()})),a=new class extends s{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__image"),this._popupCaption=this._popup.querySelector(".popup__caption")}open(e){this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupCaption.textContent=e.name,console.log(this._popupImage.src),console.log(this._popupImage.alt),super.open()}}("#image-popup"),u=new class{constructor(e,t){let{items:s,renderer:i}=e;this._cards=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._cards.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{title:"Delicious Cake",url:"https://images.unsplash.com/photo-1655552360629-2cbbb116727f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Lake Louise",url:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",url:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",url:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",url:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",url:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=m(e);u.addItem(t)}},".photo-grid"),c=new i("#add-card-popup",(e=>{const t=m(e);u.addItem(t),c.close()}));u.renderItems(),a.setEventListeners(),l.setEventListeners(),c.setEventListeners(),n.enableValidation(),o.enableValidation();const p=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),d=document.querySelector("#owner-name"),h=document.querySelector("#owner-about");function m(e){return new class{constructor(e,t,s){this._name=e.title,this._link=e.url,this._cardSelector=s,this._likeButton=null,this._deleteButton=null,this._cardImage=null,this._handleImageClick=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._handleLike())),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>this._handleDelete())),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_handleLike(){this._likeButton.classList.toggle("card__like-button_true")}_handleDelete(){this._element.remove(),this._element=null}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}}(e,(e=>{a.open(e)}),"#card-template").generateCard()}p.addEventListener("click",(()=>{d.value=r.getUserInfo().name,h.value=r.getUserInfo().description,l.open()})),_.addEventListener("click",(()=>{c.open(),o.toggleButtonState()}))})();
//# sourceMappingURL=main.js.map