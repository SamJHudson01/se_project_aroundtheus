(()=>{"use strict";const e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._inputElements.some((e=>!e.validity.valid))?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function t(e){e.classList.remove("popup_true"),document.removeEventListener("keydown",r)}function n(e){e.classList.add("popup_true"),document.addEventListener("keydown",r)}function r(e){"Escape"===e.key&&t(document.querySelector(".popup_true"))}const i=document.querySelector("#edit-profile-popup"),o=document.querySelector("#add-card-popup"),s=document.querySelector("#edit-profile-form"),l=document.querySelector("#add-place-form"),u=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__name"),c=document.querySelector(".profile__title"),d=document.querySelector('[name="name"]'),_=document.querySelector('input[name="description"]'),p=document.querySelector('[name="url"]'),m=document.querySelector('[name="title"]'),h=document.querySelectorAll(".popup__close"),v=document.querySelector(".profile__add-button"),y=document.querySelector(".photo-grid"),S=(document.querySelector("#add-place-submit-button"),{inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),b=i.querySelector(".popup__form"),E=o.querySelector(".popup__form"),f=new e(S,b),q=new e(S,E);f.enableValidation(),q.enableValidation(),u.addEventListener("click",(()=>{d.value=a.textContent,_.value=c.textContent,n(i)})),v.addEventListener("click",(()=>{n(o)})),h.forEach((e=>{e.addEventListener("click",(()=>{t(e.closest(".popup"))}))})),s.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=d.value,c.textContent=_.value,t(i)})),l.addEventListener("submit",(function(e){e.preventDefault();const n={url:p.value,title:m.value};L(n,y),t(o),q.toggleButtonState(),p.value="",m.value=""}));const L=(e,t)=>{const r=new class{constructor(e,t){this._name=e.title,this._link=e.url,this._cardSelector=t,this._likeButton=null,this._deleteButton=null,this._cardImage=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>this._handleLike())),this._deleteButton=this._element.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>this._handleDelete())),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.addEventListener("click",(()=>this._handlePreviewPicture()))}_handleLike(){this._likeButton.classList.toggle("card__like-button_true")}_handleDelete(){this._element.remove(),this._element=null}_handlePreviewPicture(){const e=document.querySelector("#image-popup"),t=e.querySelector(".popup__image"),r=e.querySelector(".popup__caption");t.src=this._link,t.alt=this._name,r.textContent=this._name,n(e)}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}}(e,"#card-template").generateCard();t.prepend(r)};[{title:"Delicious Cake",url:"https://images.unsplash.com/photo-1655552360629-2cbbb116727f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{title:"Lake Louise",url:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Bald Mountains",url:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",url:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Vanoise National Park",url:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",url:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((e=>L(e,y))),[...document.querySelectorAll(".popup")].forEach((e=>{e.addEventListener("click",(n=>{n.target.classList.contains("popup")&&t(e)}))}))})();